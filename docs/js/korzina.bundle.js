!function(){function r(r){return function(r){if(Array.isArray(r))return e(r)}(r)||function(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function(r,_){if(r){if("string"==typeof r)return e(r,_);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?e(r,_):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(r,e){(null==e||e>r.length)&&(e=r.length);for(var _=0,t=Array(e);_<e;_++)t[_]=r[_];return t}function _(){for(var r=0,e=JSON.parse(localStorage.getItem("card")),_=0;_<e.length;_++)r+=e[_].price;return r}var t;!function(){for(var r=JSON.parse(localStorage.getItem("card")),e=0;e<r.length;e++){var t=r[e],a=t.image,n=t.name,c=t.description,i=t.price,o=document.querySelector(".korzina__wrapper__right__wrapper"),p=document.querySelector(".korzina__wrapper__left"),l=' <div class="korzina__wrapper__left__card__grid">\n                            <div class="korzina__wrapper__left__card__grid__img">\n                                <img src="'.concat(a,'" alt="" />\n                            </div>\n                            <div class="korzina__wrapper__left__card__grid__header">\n                                <div class="korzina__wrapper__left__card__grid__header__name">').concat(n,'</div>\n                                <div class="korzina__wrapper__left__card__grid__header__opisanie">').concat(c,'</div>\n                            </div>\n                            <div class="korzina__wrapper__left__card__grid__num">1шт</div>\n                            <div class="korzina__wrapper__left__card__grid__price">\n                                <div class="korzina__wrapper__left__card__grid__price1">').concat(i,'BYN</div>\n                                <div class="korzina__wrapper__left__card__grid__price1__img">\n                                    <img src="./img//8664938_trash_can_delete_remove_icon 1.svg" alt="" />\n                                </div>\n                            </div>\n                        </div>'),d='<div class="korzina__wrapper__right__wrapper__card">\n                    <div class="korzina__wrapper__right__wrapper__card__mysor">\n                        <img src="./img/8664938_trash_can_delete_remove_icon 1.svg" alt="" />\n                    </div>\n                    <div class="korzina__wrapper__right__wrapper__card__left">\n                        <img src="'.concat(a,'" alt="" />\n                    </div>\n                    <div class="korzina__wrapper__right__wrapper__card__right">\n                        <div class="korzina__wrapper__right__wrapper__card__right__name">').concat(n,'</div>\n                        <div class="korzina__wrapper__right__wrapper__card__right__opisanie">\n                            ').concat(c,'\n                        </div>\n                        <div class="korzina__wrapper__right__wrapper__card__right__ypravlenii">\n                            <div class="plus"><img src="./img/172525_plus_icon 1.svg" alt="" /></div>\n                            <div class="num">1шт</div>\n                            <div class="minus"><img src="./img/Minus.svg" alt="" /></div>\n                        </div>\n                        <div class="korzina__wrapper__right__wrapper__card__right__price">').concat(i,"BYN</div>\n                    </div>\n                </div>");p.insertAdjacentHTML("beforebegin",l),o.insertAdjacentHTML("beforeend",d)}var s=_();document.querySelector(".korzina__wrapper__right__wrapper__header__price").textContent="".concat(s,"BYN")}(),t=JSON.parse(localStorage.getItem("card")),document.addEventListener("click",function(r){if(r.target.closest(".korzina__wrapper__left__card__grid__price1__img")){for(var e=r.target.closest(".korzina__wrapper__left__card__grid").querySelector(".korzina__wrapper__left__card__grid__header__name").textContent,a=0;a<t.length;a++)if(t[a].name==e){t.splice(a,1),localStorage.setItem("card",JSON.stringify(t)),r.target.closest(".korzina__wrapper__left__card__grid").remove(),document.querySelector(".korzina__wrapper__right__wrapper__header__price").innerHTML="".concat(_(),"BYN");for(var n=document.querySelectorAll(".korzina__wrapper__right__wrapper__card__right__name"),c=0,i=Array.from(n);c<i.length;c++){var o=i[c];o.textContent==e&&o.closest(".korzina__wrapper__right__wrapper__card").remove()}}}else if(r.target.closest(".korzina__wrapper__right__wrapper__card__mysor"))for(var p=r.target.closest(".korzina__wrapper__right__wrapper__card").querySelector(".korzina__wrapper__right__wrapper__card__right__name").textContent,l=0;l<t.length;l++)if(t[l].name==p){t.splice(l,1),localStorage.setItem("card",JSON.stringify(t)),r.target.closest(".korzina__wrapper__right__wrapper__card").remove(),document.querySelector(".korzina__wrapper__right__wrapper__header__price").innerHTML="".concat(_(),"BYN");for(var d=document.querySelectorAll(".korzina__wrapper__left__card__grid__header__name"),s=0,u=Array.from(d);s<u.length;s++){var g=u[s];g.textContent==p&&g.closest(".korzina__wrapper__left__card__grid").remove()}}}),document.addEventListener("click",function(r){if(r.target.closest(".plus")){var e=r.target.closest(".korzina__wrapper__right__wrapper__card"),_=e.querySelector(".num");_.textContent="".concat(parseInt(_.textContent)+1,"шт"),document.querySelector(".korzina__wrapper__right__wrapper__header__price").textContent=parseInt(document.querySelector(".korzina__wrapper__right__wrapper__header__price").textContent)+parseInt(e.querySelector(".korzina__wrapper__right__wrapper__card__right__price").textContent)+"BYN"}else if(r.target.closest(".minus")){var t=r.target.closest(".korzina__wrapper__right__wrapper__card"),a=t.querySelector(".num");if(1==parseInt(a.textContent))return;a.textContent="".concat(parseInt(a.textContent)-1,"шт"),document.querySelector(".korzina__wrapper__right__wrapper__header__price").textContent=parseInt(document.querySelector(".korzina__wrapper__right__wrapper__header__price").textContent)-parseInt(t.querySelector(".korzina__wrapper__right__wrapper__card__right__price").textContent)+"BYN"}}),document.querySelector(".korzina__wrapper__bottom__btn").onclick=function(r){razmetka='<div class="cartochka">\n    <div class="cartocka__wrapper1">\n       <h3>Оплата</h3>\n    <div class="cartochka__img"><img src="./img/close__card.svg"></div>\n \n    </div>\n    \n    <form class="cartochka__wrapper">\n        <div class="cartochka__wrapper__number">\n            <div class="cartochka__wrapper__number__text">номер карты</div>\n            <input type="text" placeholder="4122 3213 4144 4325" />\n            <div class="cartochka__wrapper__error"></div>\n        </div>\n        <div class="cartochka__wrapper2">\n            <div class="cartochka__wrapper__srok">\n                <div class="cartochka__wrapper__srok__text">срок действия</div>\n                <input type="text" placeholder="08/26" />\n                <div class="cartochka__wrapper__error"></div>\n            </div>\n            <div class="cartochka__wrapper__cvv">\n                <div class="cartochka__wrapper__cvv__text">cvv</div>\n                <input type="text" placeholder="231" />\n                <div class="cartochka__wrapper__error"></div>\n            </div>\n        </div>\n        <button type="submit" class="cartochka__btn">Оплатить</button>\n    </form>\n</div>\n',document.body.insertAdjacentHTML("afterbegin",razmetka)},document.addEventListener("click",function(e){if(e.target.closest(".cartochka__img")&&(document.querySelector(".cartochka").classList.add("cartochka__back"),document.querySelector(".cartochka").remove()),"cartochka__btn"==e.target.className){var _=["1","2","3","4","5","6","7","8","9","0"," "],t=new Date,a=String(t.getFullYear());a=a[2]+a[3];for(var n=document.querySelector(".cartochka__wrapper__number input"),c=document.querySelector(".cartochka__wrapper__srok input"),i=document.querySelector(".cartochka__wrapper__cvv input"),o=0,p=Array.from(n.value);o<p.length;o++){var l=p[o],d=document.querySelector(".cartochka__wrapper__error");if(console.log(_.includes(l)),!_.includes(l))return e.preventDefault(),void(d.innerHTML="Номер карты может содержать только цифры")}if(19!=n.value.length)return e.preventDefault(),document.querySelector(".cartochka__wrapper__error").innerHTML="Введите корректный номер карты",!1;if(5!=c.value.length||"/"!=c.value[2])return e.preventDefault(),document.querySelectorAll(".cartochka__wrapper__error")[1].innerHTML="Введите корректную дату карты",!1;if(Number(c.value[3]+c.value[4])<Number(a))return e.preventDefault(),document.querySelectorAll(".cartochka__wrapper__error")[1].innerHTML="Этот год слишком старый ",!1;if(i.value.length>3||i.value.length<3)return e.preventDefault(),document.querySelectorAll(".cartochka__wrapper__error")[2].innerHTML="CVV должен содержать 3 цифры",!1;for(var s=0,u=Array.from(i.value);s<u.length;s++){var g=u[s];if(!_.includes(g))return e.preventDefault(),document.querySelectorAll(".cartochka__wrapper__error")[2].innerHTML="CVV должен содержать только цифры",!1}var v=JSON.parse(localStorage.getItem("card"));if(localStorage.getItem("pokypki")){var m=JSON.parse(localStorage.getItem("pokypki"));return localStorage.setItem("pokypki",JSON.stringify([])),localStorage.setItem("pokypki",JSON.stringify([].concat(r(m),r(v)))),localStorage.setItem("card",JSON.stringify([])),void alert("Спасибо за заказ!!!")}return localStorage.setItem("pokypki",JSON.stringify(v)),localStorage.setItem("card",JSON.stringify([])),void alert("Спасибо за заказ!!!")}})}();